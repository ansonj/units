<html>
<head>
<title>Anson's Unit Converter</title>
<script type="text/javascript">
const precision = 3;

function buildEverything() {
    var units = [
        {name: "Speed",
        conversions:[
            {unitName:"knots",factor:1},
            {unitName:"MPH", factor:1.150779448}
        ]},
        {name: "Distance",
        conversions:[
            {unitName:"feet", factor:1},
            {unitName:"inches", factor:12},
            {unitName:"meters", factor:0.3048}
        ]}
    ];

    var html = "";
    for (var unitIndex = 0; unitIndex < units.length; unitIndex++) {
        const unit = units[unitIndex];
        html += "<table border=2 cellpadding=10><tr><th colspan=" + unit.conversions.length + " bgcolor=eeeeee>" + unit.name;
        html += "<tr>";
        for (var conversionIndex = 0; conversionIndex < unit.conversions.length; conversionIndex++) {
            html += "<th>" + unit.conversions[conversionIndex].unitName;
        }
        const input = document.unitsForm.input.value;
        for (var conversionIndex = 0; conversionIndex < unit.conversions.length; conversionIndex++) {
            html += "<tr>";
            const currentValue = input / unit.conversions[conversionIndex].factor;
            for (var columnIndex = 0; columnIndex < unit.conversions.length; columnIndex++) {
                const factor = unit.conversions[columnIndex].factor;
                const result = currentValue * factor;
                html += "<td style=\"text-align:right;\">" + result.toFixed(precision);
            }
        }
        html += "</table><br><br>";
    }
    return html;
}

function update() {
    document.getElementById("output").innerHTML = buildEverything();
    setTimeout("update()", 1000);
}
</script>
</head>
<body onLoad="update();">
<form name="unitsForm">
<input name="input" value="100" style="position:fixed;top:50;right:50;"/>
</form>
<div id="output">
</div>
</body>
</html>
